<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sophia ‚Äì Assistente para M√£es</title>
    <style>
        /* Estilos b√°sicos para o container do chat */
        #openai-chat-container {
            width: 100%;
            height: 100vh;
            position: relative;
        }
    </style>
</head>
<body>
    <!-- Container do OpenAI Chat Web Embed -->
    <div id="openai-chat-container"></div>

    <!-- Script do OpenAI Chat Web Embed -->
    <script>
        // Configura√ß√£o do OpenAI Chat Web Embed
        window.ChatbotConfig = {
            // T√≠tulo do chat
            title: "Sophia ‚Äì Assistente para M√£es",
            
            // Tema light
            theme: "light",
            
            // Idioma portugu√™s brasileiro
            language: "pt-BR",
            
            // Mensagem inicial acolhedora
            initialMessage: `Ol√°! üëã Sou a Sophia, sua assistente para maternidade e puerp√©rio.

Estou aqui para ajudar voc√™ com informa√ß√µes gerais sobre:
‚Ä¢ Gesta√ß√£o e puerp√©rio
‚Ä¢ Cuidados com o beb√™
‚Ä¢ Bem-estar materno
‚Ä¢ Alimenta√ß√£o durante a amamenta√ß√£o
‚Ä¢ Apoio emocional

‚ö†Ô∏è **IMPORTANTE - LIMITA√á√ïES:**
‚Ä¢ ‚ùå N√£o dou recomenda√ß√µes m√©dicas
‚Ä¢ ‚ùå N√£o prescrevo medicamentos
‚Ä¢ ‚ùå N√£o diagnostico doen√ßas
‚Ä¢ ‚ùå N√£o substituo atendimento profissional

‚úÖ **Sempre recomendo consultar profissionais de sa√∫de qualificados** para orienta√ß√µes personalizadas, diagn√≥sticos e tratamentos.

Como posso ajudar voc√™ hoje? üíõ`,

            // Camadas de seguran√ßa extra
            safety: {
                // Bloquear diagn√≥sticos
                blockDiagnostics: true,
                
                // Bloquear sugest√µes de medicamentos
                blockMedications: true,
                
                // Bloquear conselhos m√©dicos espec√≠ficos
                blockMedicalAdvice: true,
                
                // Bloquear prescri√ß√µes
                blockPrescriptions: true,
                
                // Bloquear tratamentos espec√≠ficos
                blockTreatments: true,
                
                // Sempre recomendar consultar profissional
                alwaysRecommendProfessional: true
            },
            
            // Configura√ß√µes de comportamento
            behavior: {
                // Sempre mencionar limita√ß√µes m√©dicas
                alwaysMentionMedicalLimitations: true,
                
                // Adicionar aviso de seguran√ßa em respostas m√©dicas
                addSafetyWarning: true,
                
                // Idioma das respostas
                responseLanguage: "pt-BR"
            },
            
            // Sistema de prompts de seguran√ßa
            systemPrompt: `Voc√™ √© a Sophia, uma assistente para maternidade e puerp√©rio.

REGRAS CR√çTICAS DE SEGURAN√áA - LEIA COM MUITA ATEN√á√ÉO:

üö´ PROIBI√á√ïES ABSOLUTAS:
‚Ä¢ NUNCA forne√ßa diagn√≥sticos m√©dicos
‚Ä¢ NUNCA recomende ou prescreva medicamentos
‚Ä¢ NUNCA sugira tratamentos espec√≠ficos
‚Ä¢ NUNCA d√™ conselhos m√©dicos personalizados
‚Ä¢ NUNCA substitua atendimento profissional

‚úÖ O QUE VOC√ä DEVE FAZER:
‚Ä¢ Fornecer informa√ß√µes gerais e educativas
‚Ä¢ Sempre recomendar consultar profissionais de sa√∫de
‚Ä¢ Orientar sobre cuidados gerais e bem-estar
‚Ä¢ Oferecer apoio emocional e informa√ß√µes sobre puerp√©rio
‚Ä¢ Direcionar para atendimento m√©dico quando necess√°rio

‚ö†Ô∏è SEMPRE INCLUA:
Todas as respostas sobre sa√∫de devem terminar com:
"‚ö†Ô∏è IMPORTANTE: Este conte√∫do √© apenas informativo e n√£o substitui uma consulta m√©dica profissional. Sempre consulte um m√©dico, enfermeiro ou profissional de sa√∫de qualificado para orienta√ß√µes personalizadas."

TOM:
‚Ä¢ Acolhedor e emp√°tico
‚Ä¢ Profissional e respons√°vel
‚Ä¢ Claro sobre limita√ß√µes
‚Ä¢ Focado em bem-estar materno`,
            
            // Configura√ß√µes de UI
            ui: {
                // Cores do tema light
                primaryColor: "#f4a6a6",
                backgroundColor: "#ffffff",
                textColor: "#5a4a42",
                
                // Mostrar avisos de seguran√ßa
                showSafetyWarnings: true,
                
                // Posi√ß√£o do widget (se aplic√°vel)
                position: "bottom-right"
            }
        };

        // Carrega o widget do OpenAI Chat Web Embed
        (function() {
            const script = document.createElement('script');
            script.src = 'https://chat.openai.com/widget.js';
            script.async = true;
            script.onload = function() {
                // Inicializa o chat ap√≥s o script carregar
                if (window.OpenAIChat) {
                    window.OpenAIChat.init({
                        container: document.getElementById('openai-chat-container'),
                        config: window.ChatbotConfig
                    });
                }
            };
            document.head.appendChild(script);
        })();

        // Fun√ß√£o adicional para bloquear conte√∫do m√©dico perigoso
        function blockDangerousContent(message) {
            const dangerousPatterns = [
                // Padr√µes de diagn√≥stico
                /voc√™ tem|voc√™ est√° com|voc√™ sofre de|diagn√≥stico de|√© um caso de/i,
                
                // Padr√µes de medicamentos
                /tome|use este medicamento|tome este rem√©dio|prescrevo|receite/i,
                
                // Padr√µes de tratamento espec√≠fico
                /fa√ßa este tratamento|iniciar tratamento com|use este procedimento/i,
                
                // Padr√µes de dosagem
                /\d+\s*(mg|ml|comprimidos|gotas)\s+(por|ao|de)\s+(dia|semana)/i
            ];

            for (let pattern of dangerousPatterns) {
                if (pattern.test(message)) {
                    return true; // Conte√∫do perigoso detectado
                }
            }
            return false;
        }

        // Intercepta mensagens para verificar seguran√ßa
        document.addEventListener('DOMContentLoaded', function() {
            // Monitora respostas do chat para seguran√ßa extra
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1) { // Element node
                            const chatMessages = node.querySelectorAll('.chat-message, .message-content, [class*="message"]');
                            chatMessages.forEach(function(msg) {
                                const text = msg.textContent || msg.innerText;
                                if (blockDangerousContent(text)) {
                                    // Adiciona aviso de seguran√ßa
                                    const warning = document.createElement('div');
                                    warning.className = 'safety-warning';
                                    warning.innerHTML = '‚ö†Ô∏è <strong>AVISO:</strong> Este conte√∫do n√£o substitui atendimento m√©dico. Sempre consulte um profissional de sa√∫de.';
                                    warning.style.cssText = 'background: #fff3cd; border: 1px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 5px; color: #856404;';
                                    msg.appendChild(warning);
                                }
                            });
                        }
                    });
                });
            });

            // Observa mudan√ßas no container do chat
            const chatContainer = document.getElementById('openai-chat-container');
            if (chatContainer) {
                observer.observe(chatContainer, {
                    childList: true,
                    subtree: true
                });
            }
        });
    </script>

    <!-- Estilos adicionais para avisos de seguran√ßa -->
    <style>
        .safety-warning {
            background: #fff3cd !important;
            border: 1px solid #ffc107 !important;
            padding: 10px !important;
            margin: 10px 0 !important;
            border-radius: 5px !important;
            color: #856404 !important;
            font-size: 14px !important;
            font-weight: 500 !important;
        }

        /* Estilos para o tema light */
        #openai-chat-container {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
    </style>
</body>
</html>

